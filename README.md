
# PMTiles Demo Server

Приложение для загрузки геоданных (Shapefile, GeoJSON и др.), их конвертации в формат **PMTiles** и отображения в браузере на интерактивной карте с базовой подложкой **OpenStreetMap**.

## Требования

Перед запуском необходимо установить:

- Docker
- Docker Compose

Проверка установки:

```
docker --version
docker compose version
```

---

## Запуск проекта

### 1️ Клонирование репозитория

```
git clone https://github.com/eva01pilot/pmtiles-demo
cd pmtiles-demo
```

---

### 2️ Запуск приложения

```
docker compose up --build
```

Первый запуск может занять несколько минут.

---

### 3️ Открытие в браузере

После успешного запуска доступны следующие адреса:

- Веб-интерфейс (карта):  
  http://localhost:8080

- Проверка API:  
  http://localhost:8080/api/health

- Консоль MinIO:  
  http://localhost:9001  
  Логин: `minio`  
  Пароль: `minio12345`

---

## Использование приложения

1. Открыть http://localhost:8080
2. В верхней панели:
   - ввести название набора данных
   - (опционально) описание
   - выбрать файл для загрузки
3. Нажать кнопку **Upload**
4. После обработки:
   - набор данных появится в списке
   - он будет автоматически отображён на карте
   - карта приблизится к границам данных

---

## Поддерживаемые форматы данных

### Поддерживаются

- ZIP-архивы с Shapefile  
  (обязательно должны содержать файлы `.shp`, `.shx`, `.dbf`)

  Пример структуры архива:

  ```
  example.zip
   ├─ example.shp
   ├─ example.shx
   ├─ example.dbf
   └─ example.prj
  ```

- GeoJSON (`.geojson`, `.json`)
- MBTiles (`.mbtiles`)
- PMTiles (`.pmtiles`)

### ❌ Не поддерживается

- одиночный файл `.shp` без ZIP-архива

---

## Хранение данных

Все файлы сохраняются в MinIO:

- Исходные файлы:

  ```
  sources/<uuid>/<original_filename>
  ```

- Сгенерированные PMTiles:

  ```
  pmtiles/<uuid>/<name>.pmtiles
  ```

---

## Остановка приложения

Для остановки всех сервисов выполнить:

```
docker compose down
```

---

## Пример данных для тестирования

Для демонстрации рекомендуется использовать открытые данные:

- Natural Earth  
  https://www.naturalearthdata.com/downloads/

